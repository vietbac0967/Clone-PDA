(function(){function h(){if(!i){i=!0;var t=document.querySelector('script[src*="googletagmanager"]'),n=t&&t.src;n&&(r=n.indexOf("id=G-")>0,u=n.indexOf("id=UA-")>0)}}function f(n,t,i){h();window.gtag&&(window.gtag("event","add_to_cart",{currency:window.BizwebAnalytics.meta.currency,items:[{id:n.product_id,name:n.title,brand:n.vendor,category:n.product_type,variant:n.variant_title,price:String(n.price),quantity:t}]}),u?window.enabled_enhanced_ecommerce?window.gtag("event","add_to_cart",{event_category:"ecommerce",event_label:n.title,value:String(n.price),currency:window.BizwebAnalytics.meta.currency,items:[{id:n.product_id,name:n.title,brand:n.vendor,category:n.product_type,variant:n.variant_title,price:String(n.price),quantity:t}]}):window.gtag("event","add_to_cart",{event_category:"ecommerce",event_label:n.title,value:String(n.price)}):r&&window.gtag("event","add_to_cart",{currency:window.BizwebAnalytics.meta.currency,items:[{id:n.product_id,name:n.title,brand:n.vendor,category:n.product_type,variant:n.variant_title,price:String(n.price),quantity:t}]}));window.fbq&&fbq("track","AddToCart",{content_ids:n.variant_id,contents:[{id:n.variant_id,quantity:t,item_price:n.price}],content_type:"product",value:String(n.price*t),currency:window.BizwebAnalytics.meta.currency},{eventID:Bizweb.fbEventId+(i?i:"")})}function e(n){for(var r,i=n.split("&"),t=0;t<i.length;t++)if(r=i[t].split("="),"quantity"===r[0])return parseInt(r[1]);return 1}function n(n,t,i,r){this.xhr=n;this.url=t;this.method=i;this.body=r}var i=!1,r=!1,u=!1,o,s,t;n.prototype.onReadyStateChange=function(){this.xhr.readyState===XMLHttpRequest.DONE&&this.handleXhrDone({method:this.method,url:this.url,body:this.body,xhr:this.xhr});this.oldOnReadyStateChange&&this.oldOnReadyStateChange(this.xhr)};n.prototype.handleXhrDone=function(n){try{switch(n.url){case"/cart/add.js":var t=n.xhr.getResponseHeader("Date");n.xhr.responseText&&f(JSON.parse(n.xhr.responseText),e(n.body),t?new Date(t).getTime():null)}}catch(i){console&&console.warn&&console.warn("[shop_events_listener] Error in handleXhrDone:  "+i.message)}return n};o=XMLHttpRequest.prototype.open;s=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(n,t){return this._url=t,this._method=n,o.apply(this,arguments)};XMLHttpRequest.prototype.send=function(t){var i=new n(this,this._url,this._method,t);return this.addEventListener?this.addEventListener("readystatechange",i.onReadyStateChange.bind(i),!1):(i.oldOnReadyStateChange=this.onreadystatechange,this.onreadystatechange=i.onReadyStateChange),s.call(this,t)};t=window.fetch;"function"==typeof t&&(window.fetch=function(){return t.apply(window,Array.prototype.slice.call(arguments)).then(function(n){if(!n.ok)return n;try{switch(!0){case n.url.includes("/cart/add.js"):var t=n.headers.get("Date");f(n,e(arguments[1].body),t?new Date(t).getTime():null)}}catch(i){console&&console.warn&&console.warn("[shop_events_listener] Error in handleFetchRequest:  "+i.message)}return n})})})();